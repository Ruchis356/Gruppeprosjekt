# Main Notebook Documentation  
*Jupyter notebook for environmental data analysis and forecasting*  
Note: This file was formatted and partially generated by AI (DeepSeek)

## Overview
Orchestrates workflow:  
`Data Import → Processing → Analysis → Visualization → Prediction`  
- Uses custom classes from `src/`  
- Generates reports/forecasts  

---

## Configuration

### Global Settings
- `SHOW_ALL_TABLES` (bool): Control table verbosity *(default: False)*  
- `SHOW_ALL_GRAPHS` (bool): Toggle optional visualizations *(default: False)*  
- `SHOW_ALL_INFO` (bool): Display debug outputs *(default: False)*  
- `SAVE_FILE` (bool): Export dataframes *(default: False)*  

### Data Sources
- **Frost API**: Historical (2003-2018) and recent (2018-present) weather data  
- **NILU CSVs**: Air quality measurements (2003-2024)  

### Key Parameters
| Variable           | Purpose                     | Default Value |
|--------------------|-----------------------------|---------------|
| `UPTIME_THRESHOLD` | Min data coverage (%)       | 95            |
| `SD_MOD`           | Outlier detection threshold | 3 (std dev)   |
| `CUT_OFF_DATE`     | Train/test split point      | 2018-01-01    |

---

## Workflow Stages

### 1. Data Import & Processing
**Weather Data:**  
- Fetched via `RawData.get_met()`  
- Missing values handled with `RefinedData.missing_data()`  

**Air Quality Data:**  
- Loaded via `RawData.get_nilu()`  
- Filtered by coverage threshold (`UPTIME_THRESHOLD`)  

**Helper Functions:**  
- `process_and_display_weather()`  
- `process_air_quality()`  

---

### 2. Statistical Analysis
**Core Methods:**  
- `total_average()`: Overall means  
- `standard_deviation()`: Variability metrics  
- `outliers()`: Identifies anomalies  
- `averages()`: Weekly aggregates  

**Visualizations:**  
- Box plots (distributions)  
- Scatter plots (temporal trends)  

---

### 3. Predictive Modeling
**Weather Models:**  
- Polynomial regression (temperature, precipitation, wind)  

**Pollution Models:**  
- Random Forest with lag/rolling features  
  Example: `run_full_analysis('NO2', NO2_FEATURES, train_data, test_data)`  

**Key Features:**  
- Seasonal features (DayOfYear_sin/cos)  
- Lag features (1-day, 7-day, etc.)  
- Weather-pollutant interactions  

---

### 4. Forecasting  
**Methods:**  
- `predict_future()`: Day-of-year predictions  
- `forecast_pollutants_with_lags()`: Recursive pollution forecasts  

**Outputs:**  
- 7-day air quality forecasts  
- Model performance diagnostics  

---

### 5. Visualization  
**Static Graphs:**  
- Comparative plots (pollutants vs weather)  
- Prediction vs actual timelines  

**Interactive (Experimental):**  
- Toggleable pollutant views  

---

## Key Outputs  
**Tables:**  
- Weekly averages  
- Outlier reports  
- Worst-case predictions  

**Graphs:**  
- `plot_full_overview()`: Historical vs predicted vs API  
- `plot_pollutant_forecasts()`: Multi-pollutant trends  

**Model Metrics:**  
- Feature importance plots  
- Residual analysis  

---

## Custom Classes Used  
| Class             | Purpose                      |
|-------------------|------------------------------|
| RawData           | API/CSV data fetching        |
| RefinedData       | Missing value handling       |
| AnalysedData      | Statistical calculations     |
| PredictiveGraphs  | Advanced model visualizations|
| InteractiveGraphs | Experimental Plotly charts   |

---

## Usage Tips  
- Set `SHOW_ALL_GRAPHS=True` for exploration  
- Adjust `SD_MOD` for outlier sensitivity  
- Check `model_information()` for diagnostics  